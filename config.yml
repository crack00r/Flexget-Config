

#########################################################################################################################config#by#snickers2k######
################### Global ########################################################################################################################
variables: options.yml # Includes Options.yml file (put in flexget folder besides config.yml)
#######    
templates:
  global:
    ######################################## Misc
    redirect_url: yes
    parsing:
      movie: '{? Parser.Movies ?}'
      series: '{? Parser.Series ?}'
    magnets: no
    ######## Some HTML setup
    headers:
      User-Agent: "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.85 Safari/537.36"
    retry_failed:
      retry_time: 60 seconds
      retry_time_multiplier: 4
      max_retries: 6
    ######## Naming-Fixes
    pathscrub: windows  # Use Windows conform filenames (since Windows is the worst of all OS, what's working on Windows, should always work on Linux/Mac)
    plugin_priority:
      manipulate: 255       # manipulate must fix the titles before lookups
      regexp: 200
    manipulate:
    # fix nonsense
      - title:
          replace:            
            regexp: '.(Deutsch|Englisch).' #fix SJ naming
            format: ''
      - title:
          replace:
            regexp: '^\[[^\]]*\][^a-z0-9]*'
            format: ''
      - title:
          replace:
            regexp: '^{[^\]]*}[^a-z0-9]*'
            format: ''
      - title:
          replace:
            regexp: '^\([^\]]*\)[^a-z0-9]*'
            format: ''
      - title:
          replace:
            regexp: '\s?\]\[\s?'
            format: '@@'
      - title:
          replace:
            regexp: '\W?@@.*'
            format: ''
      - title:
          replace:
            regexp: 'tv-film|!|,|´|`|\?|'
            format: ''
      - title:
          replace:
            regexp: '\(|\)|\[|\]'
            format: ''
      - title:
          replace:
            regexp: '( |)-( |)' #remove minus (inclusive spaces)
            format: ' '
      - title:
          replace:
            regexp: '&'
            format: ' '
      - title:            
          replace:
            regexp: "[']" # remove apostrophes
            format: ""
      - title:
          replace:
            regexp: ':'
            format: ''
      - title:
          replace:
            regexp: "[.]" #remove dot by space
            format: " "
      - title:
          replace:
            regexp: '  +' #remove multiple space by single-space
            format: ' '            
    ## Locale-fixes
      - title:
          replace:
            regexp: 'ö'
            format: 'oe'
      - title:
          replace:
            regexp: 'ä'
            format: 'ae'
      - title:
          replace:
            regexp: 'ü'
            format: 'ue'
      - title:
          replace:
            regexp: 'ß'
            format: 'ss'
      - title:
          replace:
            regexp: 'é'
            format: 'e'
      - title:
          replace:
            regexp: 'á'
            format: 'a'
      - title:
          replace:
            regexp: 'tvs|euhd|mdgp|rsg|4sj|tmsf|hrs' #remove known release-groups from titles and especially from the beginning of the title (especially local filenames) 
            format: ''            
    ## Known Problematic Releasenames
      - title:
          replace:
            regexp: 'greys' 
            format: 'greys.anatomy' 
      - title:
          replace:
            regexp: 'deadlyclass'
            format: 'deadly.class'
      - title:
          replace:
            regexp: 'totdy'
            format: 'too.old.to.die.young'
      - title:
          replace:
            regexp: "^marvel(')?s.agents.of.(s.h.i.e.l.d.?|shield)"
            format: 'Marvels.Agents.of.S.H.I.E.L.D'
      - title:
          replace:
            regexp: 'vrfall'
            format: 'ein.fall.fuer.Vera'
    ######################################## Global Exclude  (For testing: https://regex101.com)
    regexp:
      reject:
      # Release
        - \b(duo|tri|quadri|tetra|penta)logy\b # Movie-Collections (often we already have some single ones in our Library)
#        - \bcollection\b   # Collections (usually stands for complete series - not working well with flexget)
        - \buntouched\b   # Untouched (usually complete BDs with extras - incompatible with Plex/Emby etc.)
        - \bdirectors.cut\b   # too often the extended Version has  parts without foreign language
        - \bextended\b # too often the extended Version has  parts without foreign language
        - \bread.nfo\b # usually means there is something in the nfo-file to read about, mostly likely about hardcoded subs or other "bad"-Info
#        - \bhdtv\b # HDTV
      # Video
        - \b((hd|)ts|telesync)\b   # Bad-Quality
        - \b((hd|)cam)\b   # Bad-Quality
        - \brucke([^\s]+)\b # ruckel/ruckeln/ruckelt/ruckelig ## German for "lagging", Bad-Quality 
        - \b(bd|dvd|)scr(\b|eener)\b   # BD- / DVD- / SCR(EENER)
        - \br(5|6)\b   # R5/6 (Region Release: Asia & East-Europe - usually bad Quality)
        - \b(un|)sub(|s|bed)\b # Subtitles (Sub / Subs / Subbed / Unsubbed)
        - \b(hc|hardcoded)\b # Subtitles (HC / Hardcoded)
        - \bblur(\b|rt|red)\b # Blurred-Subtitles
        - \biso\b # ISO-Files
      # Audio
        - \bflac\b   # flac
        - \b(ac3(.|))md|(mic(.|)dubbed)\b # Microphone-Dubbed 
        - \b(ac3(.|))ld|(line(.|)dubbed)\b # Line-Dubbed


    ######################################## Global Log-Filter - what and how should be logged (flexget.log in the config directory)
#     log_filter:
#       task:
#         - marked seen
#         - because quality already downloaded
#         - because episode has already been downloaded
#         - Task does not have any
#       move:
#         - left because it exceeds safety value
#         - does not exists (anymore)
#       urlrewriter:
#         - URL rewritten to
#       enzyme.mkv:
#         - Reading
#         - Processing
#       enzyme.parsers.ebml.core:
#         - ignored
#         - Maximum level
#       subliminal.video:
#         - Scanning video
#       parser_internal:
#         - appears to be an episode pack
#       content_size:
#         - rejecting
#       search_rss:
#         - Error
#       assume_quality:
#         - ""
#       utils.requests:
#         - Waiting

###############################################################################################################################################
### Templates #################################################################################################################################
###############################################################################################################################################

  ######################################## Movie-Global
  movies_lookup:
    metainfo_movie: yes
    tmdb_lookup:
      language: de
    imdb_lookup: yes
    trakt_lookup:
      account: '{? trakt.acc ?}'
#    rottentomatoes_lookup: yes #Buggy - 403 Client Error: Forbidden
  ######################################## Series-Global
  Series_Lookup:
#    plugin_priority:
#      manipulate: 255       # manipulate must fix the titles before metainfo_series.
    metainfo_series: yes
    thetvdb_lookup:
      language: de
    trakt_lookup:
      account: '{? trakt.acc ?}' 
    set:
      tvdb_language: de
  ######################################## No_Seen
  no_seen:
    disable:
      - seen
      - seen_info_hash
      - seen_movies
  ######################################## Download Streams
  Movie_Streams:
    inputs:
      - rss: '{? flexget.path ?}/External-Plugins/HDWorld-Feed/HDWorld.xml'
      - rss: '{? flexget.path ?}/External-Plugins/HDArea-Movies-Feed/HDArea.xml'
      - rss: 
          url: 'https://nima4k.org/rss_movies.xml'
          link:
            - dl_shareonline
            - dl_rapidgator
#      - rss: '{? flexget.path ?}/External-Plugins/HDWorld-3D-Feed/HDWorld.xml'

  Series_Streams_Singles:
    inputs:
      - rss: '{? flexget.path ?}/External-Plugins/Serienjunkies-Feed/rss_feed_1.xml'
      - rss: '{? flexget.path ?}/External-Plugins/Serienjunkies-Feed/rss_feed_2.xml'
      - rss: '{? flexget.path ?}/External-Plugins/Serienjunkies-Feed/rss_feed_3.xml'
      - rss: '{? flexget.path ?}/External-Plugins/Serienjunkies-Feed/rss_feed_4.xml'
      - rss: '{? flexget.path ?}/External-Plugins/Serienjunkies-Feed/rss_feed_5.xml'
      - rss: '{? flexget.path ?}/External-Plugins/Serienjunkies-Feed/rss_feed_6.xml'
      - rss: '{? flexget.path ?}/External-Plugins/Serienjunkies-Feed/rss_feed_7.xml'
      - rss: '{? flexget.path ?}/External-Plugins/Serienjunkies-Feed/rss_feed_8.xml'
      - rss: '{? flexget.path ?}/External-Plugins/Serienjunkies-Feed/rss_feed_9.xml'

  Series_Streams_Seasons:
    inputs:
      - rss: '{? flexget.path ?}/External-Plugins/HDWorld-Feed/HDWorld.xml' # HDWorld      
      - rss: '{? flexget.path ?}/External-Plugins/HDArea-Series-Feed/HDArea.xml'

  ######################################## Enable/Disable Discover
  Discover-enable-Backfill:
    discover:
      what:
        - next_series_episodes:
            backfill: yes
            from_start: yes
        - next_trakt_episodes:
            account: '{? trakt.acc ?}'
            context: collected
            list: collection
            position: next
            strip_dates: yes
      from:
        - searchSerienjunkies:
            hoster: '{? Settings.Hoster ?}'
            language: '{? Settings.Language ?}'
            staffelpack: False
        - searchHdworldSeries:
            hoster: '{? Settings.Hoster ?}'

  Discover-disable-Backfill:
    discover:
      what:
        - next_series_episodes:
            backfill: no
            from_start: no
        - next_trakt_episodes:
            account: '{? trakt.acc ?}'
            context: collected
            list: collection
            position: next
            strip_dates: yes
      from:
        - searchSerienjunkies:
            hoster: '{? Settings.Hoster ?}'
            language: '{? Settings.Language ?}'
            staffelpack: False
        - searchHdworldSeries:
            hoster: '{? Settings.Hoster ?}'

  ######################################## Enable/Disable SERIES Upgrade

  enable-Upgrade-Series:
    configure_series:
      settings:
        target: '{? quality.main ?}'
        quality: '{? quality.low ?}'
        propers: 2 weeks        
        timeframe: 24 hours
        identified_by: ep
        tracking: '{? series.tracking ?}'
        upgrade: yes 
      from:
        trakt_list:
          account: '{? trakt.acc ?}'
          list: collection
          type: shows
          strip_dates: yes
          language: de
#    exists_series:
#      path: "{? filesystem.Library.series ?}/{{series_name}}"
#      allow_different_qualities: '{? series.different_qualities ?}'

  disable-Upgrade-Series:
    configure_series:
      settings:
        target: '{? quality.main ?}'
        quality: '{? quality.low ?}'
        propers: 2 weeks        
        timeframe: 24 hours
        identified_by: ep
        tracking: '{? series.tracking ?}'
        upgrade: no
      from:
        trakt_list:
          account: '{? trakt.acc ?}'
          list: collection
          type: shows
          strip_dates: yes
          language: de
#    exists_series:
#      path: "{? filesystem.Library.series ?}/{{series_name}}"
#      allow_different_qualities: '{? series.different_qualities ?}'

  ######################################## Enable/Disable MOVIES Upgrade

  enable-Upgrade-Movies:
    exists_movie:
      path: 
        - "{? filesystem.Library.movies ?}/"
      allow_different_qualities: '{? movies.different_qualities ?}'
      lookup: imdb

  disable-Upgrade-Movies:
    exec:
      on_start:
        phase: echo "Movie Upgrade Disabled"


  ######################################## Enable/Disable Special (Author) Tasks
  enable-Download_Second_IMDb_Movies:
    manual: no
  disable-Download_Second_IMDb_Movies:
    manual: yes    

  enable-Sync_Main_IMDb_to_Second:
    manual: no
  disable-Sync_Main_IMDb_to_Second:
    manual: yes

  enable-Studio_Downloads:
    manual: no
  disable-Studio_Downloads:
    manual: yes 

  enable-Download_Best_on_IMDb:
    if:
      - "'musical' in (imdb_genres or [])": reject
      - "'documentary' in (imdb_genres or [])": reject
      - imdb_year < now.year - 2:
          imdb:
            min_score: 5.0
            min_votes: 150000
      - imdb_year < now.year - 5:
          imdb:
            min_score: 5.5
            min_votes: 200000
      - imdb_year < now.year - 15:
          imdb:
            min_score: 6.0
            min_votes: 350000
      - imdb_year < now.year - 100:
          imdb:
            min_score: 7.0
            min_votes: 500000
      - "set(['animation', 'family']).issubset(set(imdb_genres or []))":
          imdb:
            min_score: 6
            min_votes: 50000

  disable-Download_Best_on_IMDb:
    exec:
      - echo "Not loading Best on IMDb" 

  enable-YouTube_Downloads: 
    manual: no
  disable-YouTube_Downloads: 
    manual: yes

  enable-Download_Specials: 
    include: '{? Specials1 ?}.yml'
  disable-Download_Specials: 
    manual: yes
    
  enable-Download_Specials2: 
    include: '{? Specials2 ?}.yml'
  disable-Download_Specials2: 
    manual: yes
    
  enable-Download_Sports: 
    manual: no
  disable-Download_Sports: 
    manual: yes

  enable-Download_Seasons: 
    manual: no
  disable-Download_Seasons: 
    manual: yes

  enable-Series_Collection_DE_Stream: 
    manual: no
  disable-Series_Collection_DE_Stream: 
    manual: yes

  enable-Sorting: 
    manual: no
  disable-Sorting: 
    manual: yes

  enable-Download_eBooks: 
    include: eBooks.yml
  disable-Download_eBooks:
    manual: yes

  enable-OnHold: 
    crossmatch:
      from:
        - trakt_list:
            account: '{? trakt.acc ?}'
            list: '{? trakt.OnHold ?}'
            type: shows
      fields:
        - imdb_id
      action: reject
  disable-OnHold:
    exec:
      - echo "Not use OnHold"

  enable-Canceled: 
    if:     
      - trakt_series_status == 'canceled': reject
  disable-Canceled:
    exec:
      - echo "Download canceled Series"

  enable-Download_Trending_Movies: 
    limit:
      amount: '{? movies.trending ?}'
      from: 
        trakt_list:
          list: trending
          type: movies
  disable-Download_Trending_Movies:
    exec:
      - echo "no Trending Movies to consider"

  enable-Download_Popular_Movies: 
    limit:
      amount: '{? movies.popular ?}'
      from: 
        trakt_list:
          list: popular
          type: movies
  disable-Download_Popular_Movies:
    exec:
      - echo "no Popular Movies to consider"

  enable-Download_Popular_Series: 
    limit:
      amount: '{? series.popular ?}'
      from: 
        trakt_list:
          list: popular
          type: shows
  disable-Download_Popular_Series:
    exec:
      - echo "no Popular Shows to consider"

  enable-Download_Trending_Series: 
    limit:
      amount: '{? series.trending ?}'
      from: 
        trakt_list:
          list: trending
          type: shows
  disable-Download_Trending_Series:
    exec:
      - echo "no Trending Shows to consider"

  enable-IMDb_Actress: 
    include: Actress.yml
  disable-IMDb_Actress:
    exec:
      - echo "no Actress's to consider"

  enable-IMDb_Actors: 
    include: Actors.yml
  disable-IMDb_Actors:
    exec:
      - echo "no Actors to consider"

  enable-3D: 
    if:
      - "'3D' in title":
          exec: 
            - echo "packageName={{title}}-({{imdb_name}})-({{imdb_year}})-{{imdb_id}}" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
            - echo "downloadFolder={? filesystem.Downloads.Main ?}/{? filesystem.Downloads.3D ?}/{{title}}/" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
          disable: seen
          list_add:
            - movie_list: 3D
  disable-3D:
    regexp:
      reject:
        - \b3D\b

  Movies_Global:
    sort_by:
      - field: quality.resolution
        reverse: yes
      - title|lower
    regexp:
      reject:
        - \bcomplete\b #In Movie-Titles, this usually means Complete-Bluray (iso)
        - \b\S[0-9][0-9](|e[0-9][0-9])\b
    if:
      - trakt_movie_user_rating > 9: ## 9-10 is ideal for usage with Plex (4 Plex Stars = 8 trakt/imdb Stars ---- 5 Plex Stars = 10 trakt/imdb Stars)
          quality: '{? quality.high ?}'
    crossmatch:
      from:
        - movie_list: offline_check
      fields:
        - imdb_id
      action: reject

  Series_Global:
    sort_by:
      field: quality
      reverse: yes

  ######################################## Languages
  German:
  # Accept Only German, by Title
    regexp:
      reject_excluding:
        - \bgerman\b
  English:
  # Accept Only Non-German
    regexp:
      reject:
        - \bgerman\b
  #################
  enable-English:
    exec:
      on_start:
        phase: echo "English Enabled"
  disable-English:
    manual: yes
    exec:
      on_start:
        phase: echo "English Disabled"
  ######################################## DownloadManager
  ################## JDownloader
  ######## Defaults
  jdownloader-Defaults:
    exec:
      - echo " " >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
      - echo "text={{url}}" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
      - echo "autoConfirm=TRUE" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
      - echo "priority=LOWER" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
      - echo "addOfflineLink=false" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
  ######## Archive-Series
  jdownloader-Archive-Series:
    exec:
      - echo "downloadPassword=serienjunkies.org"  >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
      - echo "extractPasswords=serienjunkies.org"  >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
    if:
      - trakt_ep_id:
          exec: 
            - echo "packageName={{title}}-({{trakt_series_name}})-{{trakt_ep_id}}" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
            - echo "downloadFolder={? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Series/{{title}}/" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
      - not trakt_ep_id:
          exec: 
            - echo "packageName={{title}}-({{series_name}})-({{series_id}})" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
            - echo "downloadFolder={? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Series/{{title}}-({{series_name}})-({{series_id}})/" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
  ######## Archive-Movies
  jdownloader-Archive-Movies:
    if:
      - imdb_id:
          exec: 
            - echo "packageName={{title}}-({{imdb_name}})-({{imdb_year}})-{{imdb_id}}" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
            - echo "downloadFolder={? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Movies/{{title}}-({{imdb_name}})-({{imdb_year}})-{{imdb_id}}/" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"

      - not imdb_id:
          exec: 
            - echo "packageName={{title}}-({{movie_name}})" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
            - echo "downloadFolder={? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Movies/{{title}}-({{movie_name}})/" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"

  ######## Watchlist
  jdownloader-Watchlist-Series:
    exec:
      - echo "downloadPassword=serienjunkies.org"  >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
      - echo "extractPasswords=serienjunkies.org"  >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
    if:
      - trakt_ep_id:
          exec: 
            - echo "packageName={{title}}-({{trakt_series_name}})-{{trakt_ep_id}}" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
            - echo "downloadFolder={? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Watchlist ?}/Series/{{title}}/" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
      - not trakt_ep_id:
          exec: 
            - echo "packageName={{title}}-({{series_name}})-({{series_id}})" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
            - echo "downloadFolder={? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Watchlist ?}/Series/{{title}}-({{series_name}})-({{series_id}})/" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
  ######## Watchlist
  jdownloader-Watchlist-Movies:
    if:
      - imdb_id:
          exec: 
            - echo "packageName={{title}}-({{imdb_name}})-({{imdb_year}})-{{imdb_id}}" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
            - echo "downloadFolder={? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Watchlist ?}/Movies/{{title}}-({{imdb_name}})-({{imdb_year}})-{{imdb_id}}/" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"

      - not imdb_id:
          exec: 
            - echo "packageName={{title}}-({{movie_name}})" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
            - echo "downloadFolder={? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Watchlist ?}/Movies/{{title}}-({{movie_name}})/" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
  ######## YouTube
  jdownloader-YouTube:
    exec:
      - echo "downloadFolder={? filesystem.Downloads.Main ?}/{? filesystem.Downloads.YouTube ?}/{{title}}/" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
  ######## 3D
  jdownloader-3D:
    exec:
      - echo "downloadFolder={? filesystem.Downloads.Main ?}/{? filesystem.Downloads.3D ?}/{{title}}/" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
    if:
      - imdb_id:
          exec: echo "packageName={{title}}-({{imdb_name}})-({{imdb_year}})-{{imdb_id}}" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
      - not imdb_id:
          exec: echo "packageName={{title}}-({{movie_name}})" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
  ######## eBooks
  jdownloader-eBooks:
    exec:
      - echo "downloadFolder={? filesystem.Downloads.Main ?}/{? filesystem.Downloads.eBooks ?}/{{title}}/" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
  ######## Sports
  jdownloader-Sports:
    exec:
      - echo "downloadFolder={? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Sports ?}/{{title}}/" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
  ######## Queue-enable
  jdownloader-enable-Queue:
    exec:
      - echo "autoStart=TRUE" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
      - echo "forcedStart=TRUE" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
  ######## Queue-Disable
  jdownloader-disable-Queue:
    exec:
      - echo "Queue-Disabled -> Downloads parked"
      - echo "autoStart=FALSE" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
      - echo "forcedStart=FALSE" >> "{? JDownloader.path ?}/folderwatch/{{task}}-{{title}}.crawljob"
#   ################## pyLoad (buggy? needs testing, i'm not a pyLoad-User anymore)
#   ######## Defaults
  pyload-Defaults:
    exec:
      - echo "Downloading with pyLoad"
#   ######## Archive-Movies
  pyload-Archive-Movies:
    pyload:
      enabled: yes
      folder: '{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Movies/{{title}}'
      api: '{? pyload.protocol ?}://{? pyload.ip ?}:{? pyload.port ?}/api'
      username: '{? pyload.usr ?}'
      password: '{? pyload.pwd ?}'
      multiple_hoster: yes
      queue: yes
      hoster:
        - '{? pyload.hoster1 ?}'
        - '{? pyload.hoster2 ?}'
#   ######## Archive-Movies
  pyload-Archive-Series:
    pyload:
      enabled: yes
      folder: '{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Series/{{title}}'
      package: '{{series_name}} - {{series_id}}'
      api: '{? pyload.protocol ?}://{? pyload.ip ?}:{? pyload.port ?}/api'
      username: '{? pyload.usr ?}'
      password: '{? pyload.pwd ?}'
      multiple_hoster: yes
      queue: yes
      hoster:
        - '{? pyload.hoster1 ?}'
        - '{? pyload.hoster2 ?}'
#   ######## Watchlist
  pyload-Watchlist-Movies:
    pyload:
      enabled: yes
      folder: '{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Watchlist ?}/Movies/{{title}}'
      api: '{? pyload.protocol ?}://{? pyload.ip ?}:{? pyload.port ?}/api'
      username: '{? pyload.usr ?}'
      password: '{? pyload.pwd ?}'
      multiple_hoster: yes
      queue: yes
      hoster:
        - '{? pyload.hoster1 ?}'
        - '{? pyload.hoster2 ?}'
#   ######## Watchlist
  pyload-Watchlist-Series:
    pyload:
      enabled: yes
      folder: '{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Watchlist ?}/Series/{{title}}'
      package: '{{series_name}} - {{series_id}}'
      api: '{? pyload.protocol ?}://{? pyload.ip ?}:{? pyload.port ?}/api'
      username: '{? pyload.usr ?}'
      password: '{? pyload.pwd ?}'
      multiple_hoster: yes
      queue: yes
      hoster:
        - '{? pyload.hoster1 ?}'
        - '{? pyload.hoster2 ?}'
#   ######## 3D
  pyload-3D:
    pyload:
      enabled: yes
      folder: '{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.3D ?}/{{title}}'
      api: '{? pyload.protocol ?}://{? pyload.ip ?}:{? pyload.port ?}/api'
      username: '{? pyload.usr ?}'
      password: '{? pyload.pwd ?}'
      multiple_hoster: yes
      queue: yes
      hoster:
        - '{? pyload.hoster1 ?}'
        - '{? pyload.hoster2 ?}'
#   ######## Ebooks
  pyload-eBooks:
    pyload:
      enabled: yes
      folder: '{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.EBooks ?}/{{title}}'
      api: '{? pyload.protocol ?}://{? pyload.ip ?}:{? pyload.port ?}/api'
      username: '{? pyload.usr ?}'
      password: '{? pyload.pwd ?}'
      multiple_hoster: yes
      queue: yes
      hoster:
        - '{? pyload.hoster1 ?}'
        - '{? pyload.hoster2 ?}'
#   ######## 3D
  pyload-Sports:
    pyload:
      enabled: yes
      folder: '{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Sports ?}/{{title}}'
      api: '{? pyload.protocol ?}://{? pyload.ip ?}:{? pyload.port ?}/api'
      username: '{? pyload.usr ?}'
      password: '{? pyload.pwd ?}'
      multiple_hoster: yes
      queue: yes
      hoster:
        - '{? pyload.hoster1 ?}'
        - '{? pyload.hoster2 ?}'
#   ######## YouTube
  pyload-Youtube:
    pyload:
      enabled: yes
      folder: '{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.YouTube ?}/{{title}}'
      api: '{? pyload.protocol ?}://{? pyload.ip ?}:{? pyload.port ?}/api'
      username: '{? pyload.usr ?}'
      password: '{? pyload.pwd ?}'
      multiple_hoster: yes
      queue: yes
      hoster:
        - '{? pyload.hoster1 ?}'
        - '{? pyload.hoster2 ?}'
#   ######## Queue-Enable
  pyload-enable-Queue:
    exec:
      - echo "Queue globally enabled for pyload"
#   ######## Queue-Disable
  pyload-disable-Queue:
    exec:
      - echo "Queue globally enabled for pyload"
###############################################################################################################################################
### Tasks #####################################################################################################################################
###############################################################################################################################################

tasks:
############################################################################################################ DATABASE UPDATES
############################################################################################################

  ############################################################## Updates
  #
  ######################################## Crawl
  Crawl_Plugins:
    interval: 1 hours
    template:
      - no_seen
      - no_global
    priority: 1
    no_entries_ok: yes
    exec:
      on_start:
        phase: 
          - "cd {? flexget.path ?}/External-Plugins/HDArea-Movies-Feed/ && rm *.xml; python ./HDAreaOrg-RSS.py"
          - "cd {? flexget.path ?}/External-Plugins/HDWorld-Feed/ && rm *.xml; python ./HDWorld-RSS.py"
          - "cd {? flexget.path ?}/External-Plugins/Serienjunkies-Feed/ && rm *.xml; python ./Serienjunkies-RSS.py"          
          - "cd {? flexget.path ?}/External-Plugins/HDArea-Series-Feed/ && rm *.xml; python ./HDAreaOrg-RSS.py"

  ######################################## Sync to Trakt Movie-Watchlist

  Sync_Movies_Trending:
    interval: 24 hours
    accept_all: yes
    template: 
      - no_global
      - no_seen
      - '{? enable_disable.Download_Trending_Movies ?}-Download_Trending_Movies'
      - movies_lookup
    priority: 1
    list_add:
      - trakt_list:
          account: '{? trakt.acc ?}'
          list: watchlist
          type: movies        
#       - regexp_list: Default
    if:
      - trakt_collected: reject
  
  Sync_Movies_Popular:
    interval: 24 hours
    template: 
      - no_global
      - no_seen
      - '{? enable_disable.Download_Popular_Movies ?}-Download_Popular_Movies'
      - movies_lookup
    priority: 1
    list_match:
      from:
        - trakt_list:
            account: '{? trakt.acc ?}'
            list: watchlist
            type: movies
      action: reject 
    list_add:
      - trakt_list:
          account: '{? trakt.acc ?}'
          list: watchlist
          type: movies        
#       - regexp_list: Default
    if:
      - trakt_collected: reject

  ######################################## Sync Trakt Movie-Watchlist to Flexget-Queue (strips dates and unconform-characters)
  Sync_Movies_Flexget_Default:
    priority: 1
    interval: 48 hours #takes a long time if translated to german
#     plugin_priority:
#       only_new: 255 #only_new must run before running all the scripts on seen releases
#       trakt_list: 200
    template: 
      - no_seen
      - movies_lookup
      - Movies_Global #crossmatch offline_check
    only_new: yes
    trakt_list:
      account: '{? trakt.acc ?}'
      list: watchlist
      type: movies
      language: de
      strip_dates: yes
    list_add:  
      - movie_list: Default #no need to further manipulate, since already in Global-Filter

  Populate_regexp_list:
    priority: 1
    disable: seen
    movie_list: Default
    list_add:
      - regexp_list: Default
#    manipulate:  no need since already in Global-Filter
    accept_all: yes

  Merge_external_trakt_list_to_Watchlist:
    priority: 1
    interval: 24 hours
    template: 
      - no_seen
      - movies_lookup
    accept_all: yes
    trakt_list:
      username: '{? trakt.merge_list.username ?}'
      list: '{? trakt.merge_list.listname ?}'
      type: movies
    list_add:  
      - trakt_list:
          account: '{? trakt.acc ?}'
          list: watchlist
          type: movies
    if:
      - trakt_collected: reject
      
  ######################################## Sync Trakt Movie-Watchlist to Flexget-Queue
  Sync_Actors_Movies:
    manual: yes
    include: 
      - Actors.yml
      - Actress.yml
    interval: 14 days
    template: 
      - no_global
      - no_seen
      - movies_lookup
    limit:
      amount: 50000
      from: 
        trakt_list:
          list: popular
          type: movies
          strip_dates: yes
    priority: 1
    list_add:  
      - regexp_list: Default
      - trakt_list:
          account: '{? trakt.acc ?}'
          list: watchlist
          type: movies
    if:
      - trakt_collected: reject

     ######################################## offline check/delay - add back to watchlist, if the movie is not trakt-collected within 2 weeks
  Offline_Check_Passed:
    interval: 24 hours
    delay: 2 weeks
    template: 
      - no_global
      - no_seen
    priority: 2
    movie_list: offline_check
    if: 
      - trakt_collected: accept
    list_remove: 
      - regexp_list: offline_check

  Offline_Check_Failed:
    interval: 24 hours
    delay: 2 weeks
    template: 
      - no_global
      - no_seen
    priority: 2
    movie_list: offline_check
    if:
      - not trakt_collected: accept
    list_remove:
      - regexp_list: offline_check
    list_add:  
      - trakt_list:
          account: '{? trakt.acc ?}'
          list: watchlist
          type: movies

  ######################################## Set_Series_Begin based on "Collected" in Trakt - for every show
  Update_Series_Begin:
    interval: 24 hours
    priority: 3
    template:
      - no_seen
      - no_global
      - Series_Lookup
    next_trakt_episodes:
      account: '{? trakt.acc ?}'
      context: collected
      list: collection
      strip_dates: yes
    accept_all: yes
    set_series_begin: yes

  ############################################################## Removings
  #
  ######################################## Remove canceled Series (Nobody wants to start watching canceled Series, or ?!)
  Remove_Canceled:
    priority: 1
    template:
      - no_seen
      - no_global
      - Series_Lookup
    trakt_list:
      account: '{? trakt.acc ?}'
      list: watchlist
      type: shows
    if:
      - trakt_series_status == 'canceled': accept
    list_remove:
      - trakt_list:
          account: '{? trakt.acc ?}'
          list: watchlist
          type: shows
      - trakt_list:
          account: '{? trakt.acc ?}'
          list: '{? trakt.foreign ?}'
          type: shows
  #########
  Keep_Canceled_Collection:
    exec:
      - echo "Canceled Collections won't be deleted"
    manual: yes
  ######################################## Remove Collected
  Remove_CollectedSeriesFromWatchlist:
    priority: 1
    interval: 24 hours
    template:
      - no_global
      - no_seen
    trakt_list:
      account: '{? trakt.acc ?}'
      list: watchlist
      type: shows
    crossmatch:
      from:
        - trakt_list:
            account: '{? trakt.acc ?}'
            list: collection
            type: shows
      fields:
        - imdb_id
      action: accept
    list_remove:
      - trakt_list:
          account: '{? trakt.acc ?}'
          list: watchlist
          type: shows
  ######################################## Remove Collected trakt-Watchlist
  Remove_CollectedMoviesFromWatchlist:
    priority: 1
    interval: 1 hours
    template:
      - no_global
      - no_seen
    trakt_list:
      account: '{? trakt.acc ?}'
      list: watchlist
      type: movies
    regexp_list: Default
    crossmatch:
      from:
        - trakt_list:
            account: '{? trakt.acc ?}'
            list: collection
            type: movies
      fields:
        - imdb_id
      action: accept
    list_remove:
      - trakt_list:
          account: '{? trakt.acc ?}'
          list: watchlist
          type: movies
      - regexp_list: Default

  ######################################## Remove Series from OnHold automatically, if Episode 3 is already watched - so it starts Downloading again
  Remove_Watched_OnHold:
    priority: 1
    template:
      - no_seen
      - no_global
      - Series_Lookup
    next_trakt_episodes:
      account: '{? trakt.acc ?}'
      list: '{? trakt.OnHold ?}'
      context: watched
      position: next
    if:
      - trakt_ep_id > 'S01E{? series.Start_Collection_counter ?}': accept
    list_remove:
      - trakt_list:    
          account: '{? trakt.acc ?}'
          list: '{? trakt.OnHold ?}'
          type: shows
      - trakt_list:
          account: '{? trakt.acc ?}'
          list: watchlist
          type: shows

  ######################################## Add Items based on Ombi-requests ### WORK IN PROGRESS - PLUGIN NOT IMPLEMENTED BY FLEXGET YET

#   Ombi_Movies:
#     priority: 2
#     template:
#       - no_global
#       - movies_lookup
#     seen:
#       local: yes
#       fields: [ombi_request_id]
#     ombi_list:
#       base_url: '{? ombi.url ?}'
#       port: 443
#       username: '{? ombi.usr ?}'
#       password: '{? ombi.pwd ?}'
#       type: movies
#     accept_all: yes
#     list_add:
#       - trakt_list:
#           account: '{? trakt.acc ?}'
#           list: watchlist
#           type: movies
# 
#   TV_Ombi:
#     priority: 2
#     template:
#       - no_global
#       - Series_Lookup
#     seen:
#       local: yes
#       fields: [ombi_request_id]
#     ombi_list:
#       base_url: '{? ombi.url ?}'
#       port: 443
#       username: '{? ombi.usr ?}'
#       password: '{? ombi.pwd ?}'
#       type: shows
#     accept_all: yes
#     list_add:
#       - trakt_list:
#           account: '{? trakt.acc ?}'
#           list: watchlist
#           type: shows

############################################################################################################ Movies ############################################################################################################

 ######################################## Search for queued Movies
  Movies_Watchlist_Search_DE_Main:
#    proper_movies: yes  #accept Quality-fixes (Proper means there was a bug in the release before) TOO MANY BUGS
    interval: 24 hours
    priority: 9
    template:
      - '{? DownloadManager ?}-Defaults'
      - '{? DownloadManager ?}-{? ArchiveOrWatchlist ?}-Movies'
      - '{? DownloadManager ?}-{? DownloadManagerQueue ?}-Queue'
      - '{? enable_disable.Movie_Size_Main ?}-Movie_Size_Main'
#      - '{? enable_disable.3D ?}-3D'
      - movies_lookup
      - German
      - Movies_Global
    regexp:
      reject_excluding:
        - \bdl|dual\b # Dual-Language
    quality: '{? quality.main ?}'
    discover:
      what:
        - movie_list: Default
#        - regexp_list: Default ## Search with regexp_list is the best way - but not working right now with discover - needs fix flexget-wise
      from:
        - searchHdarea:
            hoster: '{? Settings.Hoster ?}'
        - searchHdworld:
            hoster: '{? Settings.Hoster ?}'
        - searchMovieBlog:
            hoster: '{? Settings.Hoster ?}'
    list_match:
      from:
        - movie_list: Default
      single_match: yes
      remove_on_match: yes
    list_add:
      - movie_list: offline_check


 ######################################## Search for queued Movies on hdarea with the help of a custom  pipe
  Movies_Watchlist_Search_DE_Low:
    interval: 24 hours
    delay: 24 hours
    priority: 9
    template:
      - '{? DownloadManager ?}-Defaults'
      - '{? DownloadManager ?}-{? ArchiveOrWatchlist ?}-Movies'
      - '{? DownloadManager ?}-{? DownloadManagerQueue ?}-Queue'
      - '{? enable_disable.Movie_Size_Low ?}-Movie_Size_Low'
      - movies_lookup
      - German
    quality: '{? quality.low ?}'
    discover:
      what:
#        - regexp_list: Default ## Search with regexp_list is the best way - but not working right now with discover - needs fix flexget-wise
        - movie_list: Default
      from:
        - searchHdarea:
            hoster: '{? Settings.Hoster ?}'
        - searchHdworld:
            hoster: '{? Settings.Hoster ?}'
        - searchMovieBlog:
            hoster: '{? Settings.Hoster ?}'
    list_match:
      from:
        - movie_list: Default
      remove_on_match: yes
      single_match: yes
    regexp:
      reject:
        - \b3D\b
    list_add:
      - movie_list: offline_check


  ######################################## Search based on Stream
  Movies_Watchlist_Stream_DE_Main:
    priority: 4
    template:
      - '{? DownloadManager ?}-Defaults'
      - '{? DownloadManager ?}-{? ArchiveOrWatchlist ?}-Movies'
      - '{? DownloadManager ?}-{? DownloadManagerQueue ?}-Queue'
      - '{? enable_disable.Upgrade_Movies ?}-Upgrade-Movies'
      - '{? enable_disable.IMDb_Actress ?}-IMDb_Actress'
      - '{? enable_disable.IMDb_Actors ?}-IMDb_Actors'
      - '{? enable_disable.Download_Best_on_IMDb ?}-Download_Best_on_IMDb'
      - '{? enable_disable.Movie_Size_Main ?}-Movie_Size_Main'
      - movies_lookup
      - German
      - Movie_Streams
      - Movies_Global
#      - '{? enable_disable.3D ?}-3D'
    quality: '{? quality.main ?}'
    list_match:
      from:
        - movie_list: Default
      single_match: yes
      remove_on_match: yes
#    include: Movie_Size_Main.yml
    list_add:
      - movie_list: offline_check

  ######################################## Search based on Stream
  Movies_Watchlist_Stream_DE_Low:
    delay: 24 hours
    priority: 5
    template:
      - '{? DownloadManager ?}-Defaults'
      - '{? DownloadManager ?}-{? ArchiveOrWatchlist ?}-Movies'
      - '{? DownloadManager ?}-{? DownloadManagerQueue ?}-Queue'
      - '{? enable_disable.Upgrade_Movies ?}-Upgrade-Movies'
      - '{? enable_disable.IMDb_Actress ?}-IMDb_Actress'
      - '{? enable_disable.IMDb_Actors ?}-IMDb_Actors'
      - '{? enable_disable.Download_Best_on_IMDb ?}-Download_Best_on_IMDb'
      - '{? enable_disable.Movie_Size_Main ?}-Movie_Size_Low'
      - movies_lookup
      - German
      - Movie_Streams
      - Movies_Global
    quality: '{? quality.low ?}'
    seen: local #still upgradable by Main
    list_match:
      from:
        - movie_list: Default
      single_match: yes
      remove_on_match: no
    regexp:
      reject:
        - \b3D\b
#    include: Movie_Size_Low.yml
    list_add:
      - movie_list: offline_check
      
############################################################################################################ Series ############################################################################################################

  ######################################## Stream and Search for Serienunkies

  Series_Collection_DE_Search:
    interval: 24 hours
    priority: 9
    template:
      - '{? DownloadManager ?}-Defaults'
      - '{? DownloadManager ?}-{? ArchiveOrWatchlist ?}-Series'
      - '{? DownloadManager ?}-{? DownloadManagerQueue ?}-Queue'
      - 'Discover-{? series.backfill ?}-Backfill'
      - '{? series.backfill ?}-Upgrade-Series'
      - '{? enable_disable.OnHold ?}-OnHold'      
      - '{? enable_disable.Canceled ?}-Canceled'   
      - German
      - Series_Lookup   
      - Series_Global
    quality: '{? quality.main ?}'
    list_match:
      from:
        - trakt_list:
            account: '{? trakt.acc ?}'
            list: collection
            type: shows
    regexp:
      reject:
        - \bs[0-9][0-9]\b
        
  ######################################## Stream and Search for Serienunkies

  Series_Collection_DE_Stream:
    priority: 7
    template:
      - '{? DownloadManager ?}-Defaults'
      - '{? DownloadManager ?}-{? ArchiveOrWatchlist ?}-Series'
      - '{? DownloadManager ?}-{? DownloadManagerQueue ?}-Queue'
      - '{? series.backfill ?}-Upgrade-Series'
      - '{? enable_disable.OnHold ?}-OnHold'      
      - '{? enable_disable.Canceled ?}-Canceled'  
      - '{? enable_disable.Series_Collection_DE_Stream ?}-Series_Collection_DE_Stream'   
      - German
      - Series_Lookup
      - Series_Global
      - Series_Streams_Singles
    quality: '{? quality.main ?}'
    list_match:
      from:
        - trakt_list:
            account: '{? trakt.acc ?}'
            list: collection
            type: shows
    regexp:
      reject:
        - \bs[0-9][0-9]\b
    redirect_url: yes
    serienjunkies:
      language: '{? Settings.LanguageSJ ?}'
      hoster: '{? Settings.HosterSJ ?}'
  ######################################## Stream and Search for Serienunkies

  Series_Collection_DE_Seasons:
    priority: 7
    template:
      - '{? DownloadManager ?}-Defaults'
      - '{? DownloadManager ?}-{? ArchiveOrWatchlist ?}-Series'
      - '{? DownloadManager ?}-{? DownloadManagerQueue ?}-Queue'
      - '{? series.backfill ?}-Upgrade-Series'
      - '{? enable_disable.OnHold ?}-OnHold'      
      - '{? enable_disable.Seasons ?}-Seasons'      
      - '{? enable_disable.Canceled ?}-Canceled'     
      - German
      - Series_Lookup
      - Series_Global
      - Series_Streams_Seasons
    quality: '{? quality.main ?}'
    list_match:
      from:
        - trakt_list:
            account: '{? trakt.acc ?}'
            list: collection
            type: shows
    regexp:
      reject_excluding:
        - \bcomplete\b #In Series-Titles, this usually means complete Seasons
        - \bs[0-9][0-9]\b #only accept Seasons
        
  ######################################## Watchlist-Premieres | Needs work for: Prefer DE, otherwise EN
  ################################## What it does: Download Episode 1-3 and add to custom trakt-OnHold-List 
  Series_Watchlist:
    plugin_priority:
      regexp: 250
#    series_premiere:
#     allow_teasers: no
#     allow_seasonless: yes
    priority: 8
    quality: '{? quality.main ?}'
    template:
      - '{? DownloadManager ?}-Defaults'
      - '{? DownloadManager ?}-{? ArchiveOrWatchlist ?}-Series'
      - '{? DownloadManager ?}-{? DownloadManagerQueue ?}-Queue'
      - '{? enable_disable.Download_Popular_Series ?}-Download_Popular_Series'
      - '{? enable_disable.Download_Trending_Series ?}-Download_Trending_Series'
      - '{? enable_disable.Canceled ?}-Canceled'   
      - Series_Lookup
      - German
      - Series_Streams_Singles
      - Series_Global
    list_match:
      from:
        - trakt_list:
            account: '{? trakt.acc ?}'
            list: watchlist
            type: shows
      remove_on_match: no
    list_add:
      - trakt_list:
          account: '{? trakt.acc ?}'
          list: '{? trakt.OnHold ?}'
          type: shows
    regexp:
      reject_excluding:
        - \bS01(.E0|E0)('{? series.Stop_watchlist_counter ?}')\b  # counter has to be set in options.yml
      reject:
        - \bs[0-9][0-9]\b

############################################################################################################ YouTube ############################################################################################################
  YouTube-Personal-Playlist:
    priority: 10
    seen: local
    only_new: yes
    rss:
      url: "http://www.youtube.com/feeds/videos.xml?playlist_id={? YouTube.Playlist ?}"
      ascii: yes
    accept_all: yes
    template:
      - '{? enable_disable.YouTube_Downloads ?}-YouTube_Downloads'
      - '{? DownloadManager ?}-Defaults'
      - '{? DownloadManager ?}-YouTube'
      - no_global
###############################################################################################################################################
## SPECIALS ############################################################################################config#by#snickers2k###################
###############################################################################################################################################

  Sports:
    priority: 10
    regexp:
      accept:
        - Chicago.Bulls
        - Golden.State.Warriors
        - New.York.Knicks
    template:
      - '{? enable_disable.Download_Sports ?}-Download_Sports'    
      - '{? DownloadManager ?}-Defaults'
      - '{? DownloadManager ?}-Sports'
      - no_global
    seen: local
    verify_ssl_certificates: no
    csv:
      url: 'file://{? flexget.path ?}/External-Plugins/TVRex/TVRex.csv'
      values:
        title: 1
        quality: 2
        url: 3

  Specials: #custom-task
    template:
      - '{? enable_disable.Download_Specials ?}-Download_Specials'
    priority: 10


  Specials2:  #custom-task
    template:
      - no_global
      - no_seen     
      - '{? enable_disable.Download_Specials2 ?}-Download_Specials2'
    priority: 10

  ######################################## Remove Collected trakt-Watchlist
  Add_Favorite_Actress_Movies_to_List:
    priority: 8
    interval: 70 hours
    template:
      - no_global
      - no_seen
      - '{? enable_disable.IMDb_Actress ?}-IMDb_Actress'
    list_match:
      from:
        - trakt_list:
            account: '{? trakt.acc ?}'
            list: collection
            type: movies
    list_add:
      - trakt_list:
          account: '{? trakt.acc ?}'
          list: FavActress
          type: movies      

  ######################################## eBooks
# 
#   eBooks:
#     template:
#       - no_global
#       - '{? enable_disable.Download_eBooks ?}-Download_eBooks'
#       - '{? DownloadManager ?}-Defaults'
#       - '{? DownloadManager ?}-eBooks'
#     priority: 10
##     include: eBooks.yml
#     rss: https://scenefiles.to/RSS-Ebooks-German?results=filecrypt&filter=1k
#     seen: local
# 
# 
#   


###############################################################################################################################################
## MOVE ################################################################################################config#by#snickers2k###################
###############################################################################################################################################

  move-Movies:
    manual: yes
    template:
      - no_seen
      - movies_lookup
    accept_all: yes 
    regexp:
      reject:
         - \btrailer\b
         - \bsample\b
         - \bproof\b
    no_entries_ok: yes
    filesystem:
      path: '{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Movies/'
      retrieve: files
      recursive: yes 
      regexp: '.*\.(avi|mkv|mp4|m4v)$'
    move:
      unpack_safety: yes
      to: "{? filesystem.Move2Library ?}/Movies/{{tmdb_name|default(movie_name)}}{% if imdb_id|default(False) %} [{{imdb_id}}]{% endif %}"
#      rename: "{{tmdb_name|default(movie_name)}}{% if imdb_id|default(False) %} - [{{imdb_id}}]{% endif %}"
      along:
        extensions:
          - srt
          - sub
        subdirs:
          - Subs
      clean_source: 600  #remove samples and trash (below 600MB)
    content_size:
      min: 600
    exec:
      on_exit:
        phase: 
          - find "{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Series/" -type f \( -name "*sample*" -o -name "proof" \) -delete
          - find "{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Series/" -type f -size -500k -delete
          - find "{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Series/" -type d -size -900k -delete


  move-Series:
    filesystem:
      path: '{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Series/'
      retrieve: files
      recursive: yes 
      regexp: '.*\.(avi|mkv|mp4|m4v)$'
    template:
      - no_seen
      - Series_Lookup
      - '{? enable_disable.Sorting ?}-Sorting'
    require_field: [tvdb_id, series_id]
    regexp:
      reject:
        - \bsample\b 
    accept_all: yes 
    no_entries_ok: yes
    move:
      unpack_safety: yes
      to: "{? filesystem.Move2Library ?}/Series/{{ tvdb_series_name|default(series_name) }}{% if tvdb_id|default(False) %} [{{tvdb_id}}]{% endif %}/{% if series_id_type == 'ep' %}Season {{ series_season|pad(2) }}/{% endif %}/{{ tvdb_series_name|default(series_name) }}-{{ series_id }}{% if tvdb_ep_name|default(False) %}-{{ tvdb_ep_name }}{% endif %}"
#      rename: "{{ tvdb_series_name|default(series_name) }}-{{ series_id }}{% if tvdb_ep_name|default(False) %}-{{ tvdb_ep_name }}{% endif %}-{{ quality }}"
      along:
        extensions:
          - srt
          - sub
        subdirs:
          - Subs
      clean_source: 200 #remove samples and trash (below 200MB)
    content_size:
      min: 200
    all_series:
      # Don't actually filter
      parse_only: yes
      tracking: no
    # Don't attempt to move if we don't have valid metadata
    exec:
      on_exit:
        phase: 
          - find "{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Series/" -type f \( -name "*sample*" -o -name "proof" \) -delete
          - find "{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Series/" -type f -size -500k -delete
          - find "{? filesystem.Downloads.Main ?}/{? filesystem.Downloads.Archive ?}/Series/" -type d -size -900k -delete

###############################################################################################################################################
## MISC ################################################################################################config#by#snickers2k###################
###############################################################################################################################################


# Run every task on given schedule, except tasks with own interval:
schedules:
  - tasks: '*'
    schedule:
      hour: '{? flexget.scheduler ?}'
###############
web_server: yes